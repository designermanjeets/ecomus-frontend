import{Ba as h,Gc as y,Hc as f,a as g,b as p,ba as u,ea as a,fc as d,xc as s}from"./chunk-CPQ7MZ6M.js";var _=(()=>{class r{constructor(t,e,i,n){this.meta=t,this.title=e,this.platformId=i,this.document=n}setSEOData(t){if(t.title&&(this.title.setTitle(t.title),this.meta.updateTag({name:"title",content:t.title}),s(this.platformId)&&(this.document.title=t.title)),t.description){let e=this.stripHtmlTags(t.description);console.log("\u{1F50D} Setting meta description:",e),this.meta.updateTag({name:"description",content:e}),this.meta.updateTag({property:"og:description",content:e}),this.meta.updateTag({name:"twitter:description",content:e}),s(this.platformId)&&(this.setMetaTagDirectly("description",e),this.setMetaTagDirectly("og:description",e,"property"),this.setMetaTagDirectly("twitter:description",e)),console.log("\u2705 Meta description tags updated")}else console.log("\u274C No description provided to setSEOData");t.keywords&&(this.meta.updateTag({name:"keywords",content:t.keywords}),s(this.platformId)&&this.setMetaTagDirectly("keywords",t.keywords)),t.image&&(this.meta.updateTag({property:"og:image",content:t.image}),this.meta.updateTag({name:"twitter:image",content:t.image}),s(this.platformId)&&(this.setMetaTagDirectly("og:image",t.image,"property"),this.setMetaTagDirectly("twitter:image",t.image))),t.url&&(this.meta.updateTag({property:"og:url",content:t.url}),this.meta.updateTag({name:"twitter:url",content:t.url}),s(this.platformId)&&(this.setMetaTagDirectly("og:url",t.url,"property"),this.setMetaTagDirectly("twitter:url",t.url))),t.title&&(this.meta.updateTag({property:"og:title",content:t.title}),this.meta.updateTag({name:"twitter:title",content:t.title}),s(this.platformId)&&(this.setMetaTagDirectly("og:title",t.title,"property"),this.setMetaTagDirectly("twitter:title",t.title))),t.canonicalUrl?this.setCanonicalUrl(t.canonicalUrl):t.url&&this.setCanonicalUrl(t.url),t.type&&this.meta.updateTag({property:"og:type",content:t.type}),t.author&&(this.meta.updateTag({name:"author",content:t.author}),this.meta.updateTag({property:"og:author",content:t.author})),t.publishedTime&&this.meta.updateTag({property:"article:published_time",content:t.publishedTime}),t.modifiedTime&&this.meta.updateTag({property:"article:modified_time",content:t.modifiedTime}),t.section&&this.meta.updateTag({property:"article:section",content:t.section}),t.tags&&t.tags.length>0&&t.tags.forEach(e=>{this.meta.addTag({property:"article:tag",content:e})}),t.structuredData&&this.setStructuredData(t.structuredData)}setCanonicalUrl(t){if(this.meta.removeTag('rel="canonical"'),this.meta.addTag({rel:"canonical",href:t}),s(this.platformId)){let e=this.document.querySelector('link[rel="canonical"]');e?e.setAttribute("href",t):(e=this.document.createElement("link"),e.setAttribute("rel","canonical"),e.setAttribute("href",t),this.document.head.appendChild(e))}this.meta.updateTag({property:"og:url",content:t})}removeCanonicalUrl(){this.meta.removeTag('rel="canonical"')}setStructuredData(t){let e=document.querySelector('script[type="application/ld+json"]');e&&e.remove();let i=document.createElement("script");i.type="application/ld+json",i.text=JSON.stringify(t),document.head.appendChild(i)}setProductStructuredData(t){let e=[];t.product_thumbnail?.original_url&&e.push(t.product_thumbnail.original_url),t.product_galleries&&t.product_galleries.length>0&&t.product_galleries.forEach(n=>{n.original_url&&!e.includes(n.original_url)&&e.push(n.original_url)});let i={"@context":"https://schema.org","@type":"Product",name:t.name,description:t.description||t.short_description,sku:t.sku,image:e.length>0?e:void 0,brand:{"@type":"Brand",name:t.brand?.name||"Stylexio"},offers:{"@type":"Offer",price:t.sale_price||t.price,priceCurrency:t.currency||"INR",availability:t.stock_status==="in_stock"?"https://schema.org/InStock":"https://schema.org/OutOfStock",url:t.url,itemCondition:"https://schema.org/NewCondition",seller:{"@type":"Organization",name:"Stylexio"}}};t.aggregateRating&&(i.aggregateRating={"@type":"AggregateRating",ratingValue:t.aggregateRating.rating,reviewCount:t.aggregateRating.reviewCount}),this.setStructuredData(i)}setOrganizationStructuredData(){let t={"@context":"https://schema.org","@type":"Organization",name:"Ecomus",url:"https://stylexio.in",logo:"https://stylexio.in/assets/images/logo.png",sameAs:["https://facebook.com/ecomus","https://twitter.com/ecomus","https://instagram.com/ecomus"],contactPoint:{"@type":"ContactPoint",telephone:"+1-555-123-4567",contactType:"customer service"}};this.setStructuredData(t)}setBreadcrumbStructuredData(t){let e={"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:t.map((i,n)=>({"@type":"ListItem",position:n+1,name:i.name,item:i.url}))};this.setStructuredData(e)}setArticleStructuredData(t){let e={"@context":"https://schema.org","@type":"Article",headline:t.title,description:t.description,image:t.image,author:{"@type":"Person",name:t.author},publisher:{"@type":"Organization",name:"Ecomus",logo:{"@type":"ImageObject",url:"https://stylexio.in/assets/images/logo.png"}},datePublished:t.publishedDate,dateModified:t.modifiedDate};this.setStructuredData(e)}clearMetaTags(){this.meta.removeTag('name="description"'),this.meta.removeTag('name="keywords"'),this.meta.removeTag('name="author"'),this.meta.removeTag('property="og:title"'),this.meta.removeTag('property="og:description"'),this.meta.removeTag('property="og:image"'),this.meta.removeTag('property="og:url"'),this.meta.removeTag('property="og:type"'),this.meta.removeTag('name="twitter:title"'),this.meta.removeTag('name="twitter:description"'),this.meta.removeTag('name="twitter:image"'),this.meta.removeTag('name="twitter:url"')}aggressiveClearAndSet(t){if(t.title&&(this.title.setTitle(t.title),this.meta.updateTag({name:"title",content:t.title}),this.meta.updateTag({property:"og:title",content:t.title}),this.meta.updateTag({name:"twitter:title",content:t.title})),t.description){let e=this.stripHtmlTags(t.description);console.log("\u{1F525} Aggressive update - Setting meta description:",e),this.meta.updateTag({name:"description",content:e}),this.meta.updateTag({property:"og:description",content:e}),this.meta.updateTag({name:"twitter:description",content:e}),setTimeout(()=>{let i=document.querySelector('meta[name="description"]');i||(console.log("\u{1F527} Meta description tag missing, creating it..."),i=document.createElement("meta"),i.setAttribute("name","description"),document.head.appendChild(i)),i.setAttribute("content",e);let n=document.querySelector('meta[property="og:description"]');n||(n=document.createElement("meta"),n.setAttribute("property","og:description"),document.head.appendChild(n)),n.setAttribute("content",e),console.log("\u2705 Meta description forcefully set:",e.substring(0,50)+"...")},50)}else console.log("\u274C No description provided to aggressiveClearAndSet");t.url&&(this.meta.updateTag({property:"og:url",content:t.url}),this.meta.updateTag({name:"twitter:url",content:t.url})),t.image&&(this.meta.updateTag({property:"og:image",content:t.image}),this.meta.updateTag({name:"twitter:image",content:t.image})),t.type&&this.meta.updateTag({property:"og:type",content:t.type}),t.keywords&&this.meta.updateTag({name:"keywords",content:t.keywords})}updateDefaultSeo(){let t=window.location.pathname;if(t.includes("/product/")){console.log("\u{1F6AB} Skipping default SEO update - on product page");return}if(t.includes("/product")||t.includes("/collections")){console.log("\u{1F6AB} Skipping default SEO update - on product/collection page");return}console.log("\u2705 Setting default SEO for non-product page:",t),this.setSEOData({title:"Stylexio Premium Mens and Womens Fashion Online",description:"Discover new season shirts jackets suits denim and more at Stylexio. Premium quality fast shipping across India COD and easy returns.",keywords:"activewear, gym wear, joggers, men's clothes, women's clothes, stylish outfits, comfort fit, performance clothing, Stylexio",type:"website",url:"https://stylexio.in/"})}forceUpdateMetaTags(){setTimeout(()=>{this.updateDefaultSeo()},100)}setProductPageSEO(t,e,i="https://stylexio.in"){let n=e||t.slug||`product-${t.id}`,o=`${i}/product/${n}`,c=t.meta_title||this.generateProductTitle(t),l=t.meta_description||this.generateProductDescription(t),T=t.meta_keywords||this.generateProductKeywords(t);this.setSEOData({title:c,description:l,keywords:T,image:t.product_thumbnail?.original_url||t.product_galleries?.[0]?.original_url,url:o,canonicalUrl:t.canonical_url||o,type:"product",author:"Stylexio"}),this.setProductStructuredData(p(g({},t),{url:o,currency:"INR",aggregateRating:t.reviews_count>0?{rating:this.calculateAverageRating(t.review_ratings),reviewCount:t.reviews_count}:void 0}));let m=[{name:"Home",url:i},{name:"Products",url:`${i}/collections`}];t.categories&&t.categories.length>0&&m.push({name:t.categories[0].name,url:`${i}/category/${t.categories[0].slug}`}),m.push({name:t.name,url:o}),this.setBreadcrumbStructuredData(m)}generateProductTitle(t){let e=t.brand?.name?`${t.brand.name} `:"",i=t.categories?.[0]?.name?` ${t.categories[0].name}`:"",n=t.sale_price?`\u20B9${t.sale_price}`:`\u20B9${t.price}`;return`${e}${t.name}${i} - ${n} | Stylexio`}generateProductDescription(t){let e=t.brand?.name?`${t.brand.name} `:"",i=t.categories?.[0]?.name?` ${t.categories[0].name}`:"",n=t.discount>0?` Save ${t.discount}%!`:"",o=t.meta_description||t.short_description||t.description||`Shop ${e}${t.name}${i} online at Stylexio. Premium quality, great prices, fast delivery.${n}`;return o=this.stripHtmlTags(this.sanitizeProductDescription(o)),o.length>160?o.substring(0,157)+"...":o}sanitizeProductDescription(t){if(!t)return"";let e=t;return[/model\s*height[^\.!\n]*/gi,/wearing\s*(size|small|medium|large|xl|xxl|xxxl|xs)[^\.!\n]*/gi,/bust\s*[:\-]?\s*\d+\s*(cm|inch|in|')/gi,/waist\s*[:\-]?\s*\d+\s*(cm|inch|in|')/gi,/hips?\s*[:\-]?\s*\d+\s*(cm|inch|in|')/gi,/\b\d{1,2}\s*(cm|inch|in)\b/gi,/\b\d'\d{1,2}\b/gi,/size\s*chart[^\.!\n]*/gi].forEach(n=>{e=e.replace(n,"")}),e=e.replace(/\s{2,}/g," ").replace(/\s([\.,;:!\?])/g,"$1").trim(),e||(e="Premium quality, great prices, fast delivery from Stylexio."),e}generateProductKeywords(t){let e=[];return e.push(t.name),t.brand?.name&&e.push(t.brand.name),t.categories&&t.categories.forEach(i=>{e.push(i.name)}),t.tags&&t.tags.forEach(i=>{e.push(i.name)}),e.push("buy online","Stylexio","fashion","clothing"),e.join(", ")}calculateAverageRating(t){if(!t||t.length===0)return 0;let e=t.reduce((i,n)=>i+n,0);return Math.round(e/t.length*10)/10}setMetaTagDirectly(t,e,i="name"){if(s(this.platformId)){let n=this.document.querySelector(`meta[${i}="${t}"]`);n?n.setAttribute("content",e):(n=this.document.createElement("meta"),n.setAttribute(i,t),n.setAttribute("content",e),this.document.head.appendChild(n))}}stripHtmlTags(t){if(!t)return"";let e=document.createElement("div");e.innerHTML=t;let i=e.textContent||e.innerText||"";return i=i.replace(/\s+/g," ").trim(),i.length>160&&(i=i.substring(0,157)+"..."),i}forceUpdateSEOData(t){if(console.log("\u{1F680} Force update SEO data - NOT clearing tags to prevent timing issues"),this.setSEOData(t),t.title&&(this.title.setTitle(t.title),document.title=t.title,this.meta.updateTag({name:"title",content:t.title}),this.meta.updateTag({property:"og:title",content:t.title}),this.meta.updateTag({name:"twitter:title",content:t.title}),setTimeout(()=>{this.title.setTitle(t.title),document.title=t.title,this.meta.updateTag({name:"title",content:t.title}),this.meta.updateTag({property:"og:title",content:t.title}),this.meta.updateTag({name:"twitter:title",content:t.title})},0),setTimeout(()=>{this.title.setTitle(t.title),document.title=t.title,this.meta.updateTag({name:"title",content:t.title}),this.meta.updateTag({property:"og:title",content:t.title}),this.meta.updateTag({name:"twitter:title",content:t.title})},100)),t.description){let e=this.stripHtmlTags(t.description);console.log("\u{1F680} Force update - Setting meta description:",e),this.meta.updateTag({name:"description",content:e}),this.meta.updateTag({property:"og:description",content:e}),this.meta.updateTag({name:"twitter:description",content:e}),setTimeout(()=>{this.meta.updateTag({name:"description",content:e}),this.meta.updateTag({property:"og:description",content:e}),this.meta.updateTag({name:"twitter:description",content:e})},0),setTimeout(()=>{this.meta.updateTag({name:"description",content:e}),this.meta.updateTag({property:"og:description",content:e}),this.meta.updateTag({name:"twitter:description",content:e})},100),setTimeout(()=>{this.meta.updateTag({name:"description",content:e}),this.meta.updateTag({property:"og:description",content:e}),this.meta.updateTag({name:"twitter:description",content:e})},500),setTimeout(()=>{console.log("\u{1F527} Final force update - Direct DOM manipulation");let i=document.querySelector('meta[name="description"]');i||(i=document.createElement("meta"),i.setAttribute("name","description"),document.head.appendChild(i),console.log("\u{1F527} Created missing meta description tag")),i.setAttribute("content",e),console.log("\u2705 Meta description final update:",i.getAttribute("content")),this.startMetaDescriptionMonitoring(e)},1e3)}t.url&&(this.meta.updateTag({property:"og:url",content:t.url}),this.meta.updateTag({name:"twitter:url",content:t.url}),setTimeout(()=>{this.meta.updateTag({property:"og:url",content:t.url}),this.meta.updateTag({name:"twitter:url",content:t.url})},100))}startMetaDescriptionMonitoring(t){console.log("\u{1F6E1}\uFE0F Starting meta description monitoring...");let e=0,i=20,n=setInterval(()=>{e++;let o=document.querySelector('meta[name="description"]');if(!o||o.getAttribute("content")!==t){if(console.log("\u26A0\uFE0F Meta description missing or changed, restoring..."),!o){let l=document.createElement("meta");l.setAttribute("name","description"),document.head.appendChild(l)}let c=document.querySelector('meta[name="description"]');c&&(c.setAttribute("content",t),console.log("\u2705 Meta description restored:",t.substring(0,50)+"..."))}else console.log("\u2705 Meta description is stable");e>=i&&(clearInterval(n),console.log("\u{1F6E1}\uFE0F Meta description monitoring completed"))},500)}static{this.\u0275fac=function(e){return new(e||r)(a(y),a(f),a(h),a(d))}}static{this.\u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{_ as a};
