import{Ab as _,Eb as V,Fa as E,Lb as C,ba as p,ic as H,jc as N,kc as D,mc as T,nc as W,oc as z,p as F,pc as J,r as c,s as S,u as d}from"./chunk-CO6YUPXM.js";import{Ac as w,Qc as x,X as u,a as f,b as h,ba as n,ea as s,m as i}from"./chunk-CPQ7MZ6M.js";var K=(()=>{class o{static{this.type="[Brand] Get"}constructor(t){this.payload=t}}return o})(),O=(()=>{class o{static{this.type="[Brand] Get Brand By Slug"}constructor(t){this.slug=t}}return o})();var P=(()=>{class o{constructor(t){this.http=t}getBrands(t){return this.http.get(`${p.URL}/brand`,{params:t})}getBrandBySlug(t){return this.http.get(`${p.URL}/brand/slug/${t}`)}static{this.\u0275fac=function(e){return new(e||o)(s(w))}}static{this.\u0275prov=n({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var b=class I{constructor(r){this.brandService=r}static brand(r){return r.brand}static selectedBrand(r){return r.selectedBrand}getBrands(r,t){return this.brandService.getBrands(t.payload).pipe(u({next:e=>{r.patchState({brand:{data:e.data,total:e?.total?e?.total:e.data?.length}})},error:e=>{throw new Error(e?.error?.message)}}))}getBrandBySlug(r,t){return this.brandService.getBrandBySlug(t.slug).pipe(u({next:e=>{let a=r.getState();r.patchState(h(f({},a),{selectedBrand:e}))},error:e=>{throw new Error(e?.error?.message)}}))}static{this.\u0275fac=function(t){return new(t||I)(s(P))}}static{this.\u0275prov=n({token:I,factory:I.\u0275fac})}};i([c(K)],b.prototype,"getBrands",null);i([c(O)],b.prototype,"getBrandBySlug",null);i([d()],b,"brand",null);i([d()],b,"selectedBrand",null);b=i([S({name:"brand",defaults:{brand:{data:[],total:0},selectedBrand:null}})],b);var At=(()=>{class o{constructor(t,e,a){this.store=t,this.router=e,this.authService=a}canActivate(t,e){return this.authService.redirectUrl=e.url,this.store.selectSnapshot(a=>a.auth&&a.auth.access_token)?(this.store.dispatch(new _).subscribe({complete:()=>!0}),!0):this.router.createUrlTree(["/auth/login"])}canActivateChild(t,e){return this.store.selectSnapshot(a=>a.auth&&a.auth.access_token)?((this.router.url.startsWith("/account")||this.router.url=="/checkout"||this.router.url=="/compare")&&this.router.navigate(["/"]),!1):!0}static{this.\u0275fac=function(e){return new(e||o)(s(F),s(x),s(V))}}static{this.\u0275prov=n({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var X=(()=>{class o{static{this.type="[Store] Get"}constructor(t){this.payload=t}}return o})(),Y=(()=>{class o{static{this.type="[Store] Get By Slug"}constructor(t){this.slug=t}}return o})();var Z=(()=>{class o{constructor(t){this.http=t,this.skeletonLoader=!1}getStores(t){return this.http.get(`${p.URL}/store`,{params:t})}getStoreBySlug(t){return this.http.get(`${p.URL}/store/slug/${t}`)}static{this.\u0275fac=function(e){return new(e||o)(s(w))}}static{this.\u0275prov=n({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var A=class G{constructor(r,t){this.storeService=r,this.router=t}static store(r){return r.store}static selectedStore(r){return r.selectedStore}getStores(r,t){return this.storeService.skeletonLoader=!0,this.storeService.getStores(t.payload).pipe(u({next:e=>{r.patchState({store:{data:e.data,total:e?.total?e?.total:e.data?.length}})},complete:()=>{this.storeService.skeletonLoader=!1},error:e=>{throw new Error(e?.error?.message)}}))}getStoreBySlug(r,{slug:t}){return this.storeService.getStoreBySlug(t).pipe(u({next:e=>{let a=r.getState();r.patchState(h(f({},a),{selectedStore:e}))},error:e=>{throw this.router.navigate(["/404"]),new Error(e?.error?.message)}}))}static{this.\u0275fac=function(t){return new(t||G)(s(Z),s(x))}}static{this.\u0275prov=n({token:G,factory:G.\u0275fac})}};i([c(X)],A.prototype,"getStores",null);i([c(Y)],A.prototype,"getStoreBySlug",null);i([d()],A,"store",null);i([d()],A,"selectedStore",null);A=i([S({name:"store",defaults:{store:{data:[],total:0},selectedStore:null}})],A);var M=(()=>{class o{static{this.type="[Attribute] Get"}constructor(t){this.payload=t}}return o})(),tt=(()=>{class o{static{this.type="[Attribute] Value Get"}constructor(t){this.payload=t}}return o})();var j=class q{constructor(r){this.attributeService=r}static attribute(r){return r.attribute}static attribute_value(r){return t=>t?r?.attribute_values.filter(e=>+e.attribute_id===t)?.map(e=>({label:e?.value,value:e?.id})):[]}getAttributes(r,t){return this.attributeService.skeletonLoader=!0,this.attributeService.getAttributes(t.payload).pipe(u({next:e=>{r.patchState({attribute:{data:e.data,total:e?.total?e?.total:e.data.length}})},complete:()=>{this.attributeService.skeletonLoader=!1},error:e=>{throw new Error(e?.error?.message)}}))}getAttributeValues(r,t){return this.attributeService.getAttributeValues(t.payload).pipe(u({next:e=>{let a=r.getState();r.patchState(h(f({},a),{attribute_values:e.data}))},error:e=>{throw new Error(e?.error?.message)}}))}static{this.\u0275fac=function(t){return new(t||q)(s(C))}}static{this.\u0275prov=n({token:q,factory:q.\u0275fac})}};i([c(M)],j.prototype,"getAttributes",null);i([c(tt)],j.prototype,"getAttributeValues",null);i([d()],j,"attribute",null);i([d()],j,"attribute_value",null);j=i([S({name:"attribute",defaults:{attribute:{data:[],total:0},attribute_values:[]}})],j);var et=(()=>{class o{constructor(t){this.http=t,this.skeletonLoader=!1}getQuestionAnswers(t){return this.http.get(`${p.URL}/question-and-answer`,{params:t})}sendQuestion(t){return this.http.post(`${p.URL}/question-and-answer`,t)}updateQuestionAnswers(t,e){return this.http.put(`${p.URL}/question-and-answer/${t}`,e)}feedback(t){return this.http.post(`${p.URL}/question-and-answer/feedback`,t)}static{this.\u0275fac=function(e){return new(e||o)(s(w))}}static{this.\u0275prov=n({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var y=class L{constructor(r){this.questionsAnswersService=r}static questionsAnswers(r){return r.question}getQuestionAnswers(r,t){return this.questionsAnswersService.skeletonLoader=!0,this.questionsAnswersService.getQuestionAnswers(t.slug).pipe(u({next:e=>{r.patchState({question:{data:e.data,total:e?.total?e?.total:e.data?.length}})},complete:()=>{this.questionsAnswersService.skeletonLoader=!1},error:e=>{throw new Error(e?.error?.message)}}))}sendQuestion(r,t){return this.questionsAnswersService.sendQuestion(t.payload).pipe(u({next:e=>{let a=r.getState();r.patchState(h(f({},a),{question:{data:[...a.question.data,e],total:a?.question.total+1}}))},error:e=>{throw new Error(e?.error?.message)}}))}update(r,{payload:t,id:e}){return this.questionsAnswersService.updateQuestionAnswers(e,t).pipe(u({next:a=>{if(typeof a=="object"){let l=r.getState(),m=[...l.question.data],g=m.findIndex($=>$.id===e);m[g]=a,r.patchState(h(f({},l),{question:{data:m,total:l.question.total}}))}},error:a=>{throw new Error(a?.error?.message)}}))}Feedback(r,t){let e=r.getState(),a=[...e.question.data],l=a.findIndex(m=>Number(m.id)===Number(t.payload.question_and_answer_id));if(t.type==="liked"||t.type==="disliked"){let m=a[l].reaction,g=t.payload.reaction;m===g?(t.type==="liked"?a[l].total_likes-=1:a[l].total_dislikes-=1,a[l].reaction=null,t.payload.reaction=null):(m==="liked"?a[l].total_likes-=1:m==="disliked"&&(a[l].total_dislikes-=1),t.type==="liked"?a[l].total_likes+=1:a[l].total_dislikes+=1,a[l].reaction=g,t.payload.reaction=g)}return r.patchState(h(f({},e),{question:{data:a,total:e.question.total}})),this.questionsAnswersService.feedback(t.payload)}static{this.\u0275fac=function(t){return new(t||L)(s(et))}}static{this.\u0275prov=n({token:L,factory:L.\u0275fac})}};i([c(T)],y.prototype,"getQuestionAnswers",null);i([c(W)],y.prototype,"sendQuestion",null);i([c(z)],y.prototype,"update",null);i([c(J)],y.prototype,"Feedback",null);i([d()],y,"questionsAnswers",null);y=i([S({name:"question",defaults:{question:{data:[],total:0}}})],y);var rt=(()=>{class o{constructor(t){this.http=t}getReview(t){return this.http.get(`${p.URL}/front/review`,{params:t})}sendReview(t){return this.http.post(`${p.URL}/review`,t)}updateReview(t,e){return this.http.put(`${p.URL}/review/${t}`,e)}static{this.\u0275fac=function(e){return new(e||o)(s(w))}}static{this.\u0275prov=n({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var k=class U{constructor(r,t){this.notificationService=r,this.reviewsService=t}static review(r){return r.review}getReview(r,t){return this.reviewsService.getReview(t.payload).pipe(u({next:e=>{r.patchState({review:{data:e.data,total:e?.total?e?.total:e.data?.length}})},error:e=>{throw new Error(e?.error?.message)}}))}sendReview(r,t){return this.reviewsService.sendReview(t.payload).pipe(u({next:e=>{let a=r.getState();r.patchState(h(f({},a),{review:{data:[...a.review.data,e],total:a?.review.total+1}}))},complete:()=>{this.notificationService.showSuccess("Review Send Successfully.")},error:e=>{throw new Error(e?.error?.message)}}))}update(r,{payload:t,id:e}){return this.reviewsService.updateReview(e,t).pipe(u({next:a=>{if(typeof a=="object"){let l=r.getState(),m=[...l.review.data],g=m.findIndex($=>$.id===e);m[g]=a,r.patchState(h(f({},l),{review:{data:m,total:l.review.total}}))}},complete:()=>{this.notificationService.showSuccess("Review Updated Successfully.")},error:a=>{throw new Error(a?.error?.message)}}))}static{this.\u0275fac=function(t){return new(t||U)(s(E),s(rt))}}static{this.\u0275prov=n({token:U,factory:U.\u0275fac})}};i([c(H)],k.prototype,"getReview",null);i([c(N)],k.prototype,"sendReview",null);i([c(D)],k.prototype,"update",null);i([d()],k,"review",null);k=i([S({name:"review",defaults:{review:{data:[],total:0}}})],k);var ot=(()=>{class o{static{this.type="[State] Get"}constructor(t){this.country_id=t}}return o})();var at=(()=>{class o{constructor(t){this.http=t}getStates(){return this.http.get(`${p.URL}/state`)}static{this.\u0275fac=function(e){return new(e||o)(s(w))}}static{this.\u0275prov=n({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var B=class Q{constructor(r){this.stateService=r}static state(r){return r.state}static states(r){return t=>t?r.state.data.filter(e=>e.country_id==t).map(e=>({label:e?.name,value:e?.id,country_id:e?.country_id})):r.state.data.map(e=>({label:e?.name,value:e?.id,country_id:e?.country_id}))}getStates(r,t){return r.getState()?.state?.data?.length?!0:this.stateService.getStates().pipe(u({next:a=>{r.patchState({state:{data:a}})},error:a=>{throw new Error(a?.error?.message)}}))}static{this.\u0275fac=function(t){return new(t||Q)(s(at))}}static{this.\u0275prov=n({token:Q,factory:Q.\u0275fac})}};i([c(ot)],B.prototype,"getStates",null);i([d()],B,"state",null);i([d()],B,"states",null);B=i([S({name:"state",defaults:{state:{data:[]}}})],B);export{At as a,K as b,O as c,X as d,Y as e,b as f,Z as g,A as h,M as i,j,et as k,y as l,k as m,ot as n,B as o};
